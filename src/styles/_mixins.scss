@use "sass:map";
@use "sass:math";
@use "@/styles/tokens" as t;

/* rem変換 */
@function rem($px) {
  $numeric: if(unit($px) == "px", math.div($px, 1px), $px);
  @return math.div($numeric, 16) * 1rem;
}

/* spacing */
@function space($key) {
  $v: map.get(t.$space, $key);
  @if $v == null {
    @warn "space #{$key} not found";
  }
  @return rem($v);
}

/* color */
@function color($key) {
  @return map.get(t.$colors, $key);
}

/* media query */
@mixin mq($key) {
  @media (min-width: map.get(t.$breakpoints, $key)) {
    @content;
  }
}

/* fluid（範囲をフォーム向けに縮小） */
@function fluid($min, $max, $vw-min: 360, $vw-max: 1280) {
  $slope: math.div($max - $min, $vw-max - $vw-min) * 100;
  $intercept: $min - math.div($slope * $vw-min, 100);
  @return clamp(#{$min}px, #{$intercept}px + #{$slope}vw, #{$max}px);
}

/* container（フォーム向けに狭め） */
@mixin container() {
  max-width: var(--container-max);
  margin-inline: auto;
  padding-inline: var(--container-pad);
}

/* 優しいトランジション */
@mixin transition($prop: all) {
  transition: $prop var(--motion-fast) var(--motion-ease);
}

/* section-space：LP向けを撤去し、フォーム向けに最適化 */
@mixin section-space($y: space(32)) {
  padding-block: $y;

  @include mq(md) {
    padding-block: space(48);
  }
}

/* radius */
@function radius($key) {
  @return map.get(t.$radii, $key);
}

@function shadow($key) {
  @return map.get(t.$shadows, $key);
}
